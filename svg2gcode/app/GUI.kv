#:import utils kivy.utils
WindowManager:
    FirstWindow:
    SecondWindow:
    ThirdWindow:
    FourthWindow:
    FifthWindow:

<FirstWindow>:
    id: first_window
    name: "text"

    FloatLayout:
        size: root.width, root.height
    
        Image:
            source: 'logo6.png'
            size_hint: (0.5,0.3)
            pos_hint: {'center_x': 0.5, 'top': 1}
    
        Button:
            text: "Graphics"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.5, 'top': 0.7}
            outline_color:(1,1,1,1)
            on_release: 
                app.root.current = "graphic"
                root.manager.transition.direction = "left"
        
        Button:
            text: "Text"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.347, 'top': 0.7}
        
        Button:
            text: "Draw"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.653, 'top': 0.7}
            on_release: 
                app.root.current = "draw"
                root.manager.transition.direction = "left"
        
        Label:
            text: "Text Mode"
            font_size: 30
            bold: True
            color: utils.get_color_from_hex('#fc0303')
            pos_hint: {'center_x': 0.5, 'top': 1.05}
        
        Label:
            text: "Text:"
            font_size: 20
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.075, 'top': 0.95}
        
        TextInput:

            size_hint: (0.5,0.1)
            pos_hint: {'center_x': 0.5,'top':0.4}
            mode: "round"
            multinline: False
        
        Button:
            text: "Draw!"
            font_size: 24
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#1cc961')
            size_hint: (0.5,0.1)
            pos_hint: {'center_x': 0.5,'top':0.28}

<SecondWindow>:
    id: second_window
    name: "graphic"

    FloatLayout:
        size: root.width, root.height
        
        Image:
            source: 'logo6.png'
            size_hint: (0.5,0.3)
            pos_hint: {'center_x': 0.5, 'top': 1}
        
        Button:
            text: "Graphics"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.5, 'top': 0.73}
            outline_color:(1,1,1,1)
            on_release: app.root.current = "graphic"
        
        Button:
            text: "Text"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.347, 'top': 0.73}
            on_release: 
                app.root.current = "text"
                root.manager.transition.direction = "right"
            
        Button:
            text: "Draw"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.653, 'top': 0.73}
            on_release: 
                app.root.current = "draw"
                root.manager.transition.direction = "left"
        
        Button:
            text: "Load SVG"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#9042f5')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.347, 'top': 0.63}
            on_release:
                app.root.current = "graphic_1"
                root.manager.transition.direction = "left"
        
        Button:
            name: "line.svg"
            pos_hint:{'x': 0.27, 'top': 0.56}
            size_hint:(0.2,0.17)
            background_color: 1,1,1,1
            background_normal:''
            on_release: app.create_patch(str(self.name))
            Image:
                source: 'line.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

        Button:
            name: "ellipse.svg"
            pos_hint:{'x': 0.27, 'top': 0.38}
            size_hint:(0.2,0.17)
            background_color: 1,1,1,1
            background_normal:''
            on_release: root.send_gcode(str(self.name))
            Image:
                source: 'ellipse.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
        
        Button:
            name: "length-mm.svg"
            pos_hint:{'x': 0.27, 'top': 0.2}
            size_hint:(0.2,0.17)
            background_color: 1,1,1,1
            background_normal:''    
            on_release: root.send_gcode(str(self.name))
            Image:
                source: 'length-mm.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y

<FourthWindow>:
    name: "graphic_1"
    id: fourth_window
    svg_name: svg_name

    FloatLayout:
        size: root.width, root.height
        
        Image:
            source: 'logo6.png'
            size_hint: (0.5,0.2)
            pos_hint: {'center_x': 0.5, 'top': 1}
        
        Button:
            text: "Graphics"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.5, 'top': 0.78}
            outline_color:(1,1,1,1)
            on_release: app.root.current = "graphic"
        
        Button:
            text: "Text"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.347, 'top': 0.78}
            on_release: 
                app.root.current = "text"
                root.manager.transition.direction = "right"
            
        Button:
            text: "Draw"
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#3392ff')
            size_hint: (0.15,0.06)
            pos_hint: {'center_x': 0.653, 'top': 0.78}
        
        Label:
            text: "Load SVG file"
            font_size: 24
            bold: True
            color: utils.get_color_from_hex('#fc0303')
            pos_hint: {'center_x': 0.5, 'top': 1.17}

        Label:
            text: "Offset X(cm):"
            font_size: 15
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.04, 'top': 1.12}
        
        TextInput:
            size_hint: (0.5,0.05)
            pos_hint: {'center_x': 0.5,'top':0.6}
            mode: "round"
            multinline: False
        
        Label:
            text: "Offset Y(cm):"
            font_size: 15
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.04, 'top': 1.02}

        TextInput:
            size_hint: (0.5,0.05)
            pos_hint: {'center_x': 0.5,'top':0.5}
            mode: "round"
            multinline: False
        
        Label:
            text: "Scale:"
            font_size: 15
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.07, 'top': 0.92}
        
        TextInput:
            size_hint: (0.5,0.05)
            pos_hint: {'center_x': 0.5,'top':0.4}
            mode: "round"
            multinline: False
        
        Label:
            id: svg_name
            text: "SVG File:"
            font_size: 15
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.06, 'top': 0.82}
        
        Button:
            text: "Browse"
            font_size: 12
            bold: False
            background_normal:''
            background_color: utils.get_color_from_hex('#1cc961')
            size_hint: (0.1,0.05)
            pos_hint: {'x': 0.25,'top':0.25}
            on_release:
                app.root.current = "svg_file"
                root.manager.transition.direction = "left"
            

        Button:
            text: "Draw!"
            font_size: 24
            bold: True
            background_normal:''
            background_color: utils.get_color_from_hex('#1cc961')
            size_hint: (0.5,0.05)
            pos_hint: {'center_x': 0.5,'top':0.15}


<FifthWindow>:
    id: fifth_window
    name: "svg_file"

    FloatLayout:
        background_color: (0,0,0,1)
        size: root.height, root.width
        padding: 20
        spacing: 20

        Label: 
            id: svg_name5
            text: "SVG File:"
            font_size: 15
            bold: True
            color: utils.get_color_from_hex('#0f0f0f')
            pos_hint: {'center_x': 0.347-0.06, 'top': 0.82}
        

        FileChooserIconView:
            id: filechooser
            on_selection:
                root.manager.get_screen('graphic_1').svg_name.text = str(self.selection)
                app.root.current = "graphic_1"
                root.manager.transition.direction = "right"

<ThirdWindow>:
    name: "draw"
    id: third_window

    Button:
        text: "Text"
        bold: True
        background_normal:''
        background_color: utils.get_color_from_hex('#3392ff')
        size_hint: (0.15,0.06)
        pos_hint: {'center_x': 0.4, 'top': 0.2}
        on_release: 
            app.root.current = "text"
            root.manager.transition.direction = "right"
    
    Button:
        text: "Graphics"
        bold: True
        background_normal:''
        background_color: utils.get_color_from_hex('#3392ff')
        size_hint: (0.15,0.06)
        pos_hint: {'center_x': 0.56, 'top': 0.2}
        on_release: 
            app.root.current = "graphic"
            root.manager.transition.direction = "right"
    
    Button:
        text: "Clear"
        bold: True
        background_normal:''
        background_color: utils.get_color_from_hex('#3392ff')
        size_hint: (0.15,0.06)
        pos_hint: {'center_x': 0.4, 'top': 0.13}
        on_release: root.clear_canvas()
    
    Button:
        text: "Finish"
        bold: True
        background_normal:''
        background_color: utils.get_color_from_hex('#3392ff')
        size_hint: (0.15,0.06)
        pos_hint: {'center_x': 0.56, 'top': 0.13}
        #on_release: 



    
    
    